services:
  go:
    image: golang:1.25.5
    working_dir: /app
    volumes:
      - ./go:/app
    command: ["go", "run", "main.go"]
    ports:
      - "3010:8080"

  node:
    image: node:20
    working_dir: /app
    volumes:
      - ./node:/app
    command: ["sh", "-c", "npm install && npm start"]
    ports:
      - "3020:8080"
    depends_on:
      - go

  python:
    image: python:3.12
    working_dir: /app
    volumes:
      - ./python:/app
    command:
      [
        "sh",
        "-c",
        "pip install --no-cache-dir fastapi uvicorn && uvicorn main:app --host 0.0.0.0 --port 8080",
      ]
    ports:
      - "3030:8080"
    depends_on:
      - node

  dotnet:
    image: mcr.microsoft.com/dotnet/sdk:8.0
    working_dir: /app
    volumes:
      - ./dotnet:/app
    command: ["dotnet", "run", "--project", "dotnet.csproj", "--urls", "http://0.0.0.0:8080"]
    ports:
      - "3040:8080"
    depends_on:
      - python

  java:
    image: maven:3.9-eclipse-temurin-21
    working_dir: /app
    volumes:
      - ./java:/app
    command: ["mvn", "spring-boot:run", "-Dspring-boot.run.jvmArguments=-Dserver.port=8080"]
    ports:
      - "3050:8080"
    depends_on:
      - dotnet

  rust:
    image: rust:1.78
    working_dir: /app
    volumes:
      - ./rust:/app
    command: ["cargo", "run"]
    ports:
      - "3060:8080"
    depends_on:
      - java

  zig:
    image: ziglang/zig:0.12.0
    working_dir: /app
    volumes:
      - ./zig:/app
    command: ["zig", "build", "run"]
    ports:
      - "3070:8080"
    depends_on:
      - rust
